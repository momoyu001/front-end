# 微前端

## 为什么不使用`iframe`作为承载微前端子应用的容器？
主应用通过`iframe`来加载子应用，iframe自带的样式、环境隔离机制使得它具备天然的沙盒机制，但是也由于它的隔离性导致其并不适合作为子应用的加载器，用户体验差、研发工作中造成较多的困扰。
- 使用iframe会大幅增加内存和计算资源，因为iframe内存所承载的页面需要一个全新并且完整的文档环境
- iframe与上层应用并非同一个文档上下文，会导致：
    - 主应用劫持快捷键操作
    - 事件无法冒泡到顶层，针对整个应用统一处理时效
    - 事件冒泡不穿透到主文档树上，焦点在子应用时，事件无法传递上一个文档流
    - 跳转路径无法与上层路径同步，刷新丢失路由状态
    - iframe内元素会被限制在文档树中，视窗宽高限制问题
    - iframe登录状态无法共享，子应用需要重新登录
    - iframe在禁止三方cookie时，iframe平台服务不可用
    - iframe应用加载失败，内容发生错误，主应用无法感知
    - 难以计算出iframe作为页面一部分是的性能情况
- 无法预加载缓存iframe内容
- 无法共享基础库进一步减少体积包
- 事件通信繁琐且限制多

## iframe
iframe加载文档的能力可以分为四层：文档的加载能力、HTML的渲染、执行JavaScript、隔离样式和JavaScript运行环境。
